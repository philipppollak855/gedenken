{% extends "admin/base_site.html" %}
{% block content %}
<h1>Globale Suche</h1>
<form action="" method="get">
    <input type="text" name="q" value="{{ query }}" placeholder="Suchen...">
    <input type="submit" value="Suchen">
</form>

{% if query %}
    <h2>Ergebnisse für "{{ query }}"</h2>

    {% if results.users %}
    <h3>Benutzer</h3>
    <ul>
        {% for user in results.users %}
        <li><a href="{% url 'admin:api_user_change' user.pk %}">{{ user.first_name }} {{ user.last_name }} ({{ user.email }})</a></li>
        {% endfor %}
    </ul>
    {% endif %}

    {% if results.memorial_pages %}
    <h3>Gedenkseiten</h3>
    <ul>
        {% for page in results.memorial_pages %}
        <li><a href="{% url 'admin:api_memorialpage_change' page.pk %}">Gedenkseite für {{ page.first_name }} {{ page.last_name }}</a></li>
        {% endfor %}
    </ul>
    {% endif %}

    {% if results.relatives %}
    <h3>Angehörige</h3>
    <ul>
        {% for link in results.relatives %}
        <li>
            <a href="{% url 'admin:api_user_change' link.relative_user.pk %}">{{ link.relative_user.first_name }} {{ link.relative_user.last_name }}</a>
            ist Angehöriger von
            <a href="{% url 'admin:api_memorialpage_change' link.deceased_user.pk %}">{{ link.deceased_user.first_name }} {{ link.deceased_user.last_name }}</a>
        </li>
        {% endfor %}
    </ul>
    {% endif %}

    {% if not results.users and not results.memorial_pages and not results.relatives %}
    <p>Keine Ergebnisse gefunden.</p>
    {% endif %}
{% endif %}
{% endblock %}
